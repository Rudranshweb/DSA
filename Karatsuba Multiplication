import java.math.BigInteger;
import java.util.Scanner;

public class KaratsubaShort {

    static BigInteger karatsuba(BigInteger x, BigInteger y) {
        int n = Math.max(x.toString().length(), y.toString().length());
        if (n <= 1) return x.multiply(y);

        int half = n / 2;
        BigInteger p = BigInteger.TEN.pow(half);

        BigInteger a = x.divide(p), b = x.mod(p);
        BigInteger c = y.divide(p), d = y.mod(p);

        BigInteger ac = karatsuba(a, c);
        BigInteger bd = karatsuba(b, d);
        BigInteger mid = karatsuba(a.add(b), c.add(d)).subtract(ac).subtract(bd);

        return ac.multiply(BigInteger.TEN.pow(2 * half)).add(mid.multiply(p)).add(bd);
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.print("Enter first number: ");
        BigInteger x = sc.nextBigInteger();

        System.out.print("Enter second number: ");
        BigInteger y = sc.nextBigInteger();

        System.out.println("Result: " + karatsuba(x, y));
        sc.close();
    }
}
